<div id="boxbody${wUniqueName}" class="box-body">

{  
   "status":"ok",
   "circle":{  
      "id":"7ea9cc91-36d9-41d1-95f1-c03230c1285d",
      "name":"circle 1",
      "dateCreated":"09/23/2016",
      "description":"test 1",
      "numberAuthors":2,
      "authors":[  
         {  
            "id":"f98844af-1d20-4edf-8caa-7c0017314611",
            "name":"Ulrik Schroeder",
            "photo":"https://scholar.google.com/citations?view_op=view_photo&user=8EYyC1MAAAAJ&citpid=1",
            "status":"Professor",
            "aff":"Rheinisch Westfalische Technische Hochschule Aachen"
         },
         {  
            "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
            "name":"Mohamed Amine Chatti",
            "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1",
            "status":"Assistant Professor",
            "aff":"Rheinisch Westfalische Technische Hochschule Aachen"
         }
      ],
      "numberPublications":10,
      "publications":[  
         {  
            "id":"bd65e872-d5b1-4a4d-bb5e-00d0c05264f9",
            "title":"PLEF: a conceptual framework for mashup personal learning environments",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               }
            ],
            "date":"2009-01-01",
            "type":"JOURNAL",
            "volume":"11",
            "issue":"3",
            "venue":"IEEE Technical Committee on Learning Technology (TCLT)"
         },
         {  
            "id":"8bf9be2f-529d-49d3-8e58-b7dc41005279",
            "title":"LaaN: Convergence of Knowledge Management and Technology-Enhanced Learning.",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"f98844af-1d20-4edf-8caa-7c0017314611",
                  "name":"Ulrik Schroeder",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=8EYyC1MAAAAJ&citpid=1"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               }
            ],
            "keyword":"LaaN,Technology-enhanced learning,knowledge ecology,knowledge management,lifelong learning,personalization",
            "date":"2012-01-01",
            "type":"JOURNAL",
            "event":{  
               "id":"a0c4ffa9-9c43-4d89-bce6-5d25fd968fde",
               "name":"TLT",
               "isAdded":false
            },
            "publisher":"IEEE"
         },
         {  
            "id":"949ded5b-b8b3-4463-b122-ca3f468d301d",
            "title":"Design and Implementation of a Learning Analytics Toolkit for Teachers.",
            "coauthor":[  
               {  
                  "id":"4b59e671-40ad-481a-94e6-3a690dc4f0ad",
                  "name":"Anna Lea Dyckhoff"
               },
               {  
                  "id":"43714b34-c5f6-4213-952a-6607b1447c7f",
                  "name":"Dennis Zielke"
               },
               {  
                  "id":"6b8bb784-a810-4a7f-86e8-c4319b7d483b",
                  "name":"Mareike Bultmann"
               },
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"f98844af-1d20-4edf-8caa-7c0017314611",
                  "name":"Ulrik Schroeder",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=8EYyC1MAAAAJ&citpid=1"
               }
            ],
            "keyword":"EDM,Improving educational software,Learning analytics,Teacher support",
            "date":"2012-07-01",
            "type":"JOURNAL",
            "event":{  
               "id":"b3e383a6-2a83-4ecc-8e73-58b5a2fb9181",
               "name":"Educational Technology & Society",
               "isAdded":false
            },
            "publisher":"International Forum of Educational Technology & Society",
            "volume":"15",
            "issue":"3",
            "pages":"58 - 76"
         },
         {  
            "id":"9e5f3246-ea02-45cb-92fb-0e3be6235ea3",
            "title":"GeRoMe: A Generic Role Based Metamodel for Model Management.",
            "coauthor":[  
               {  
                  "id":"8b4de244-635e-490f-8af3-1751e5e07885",
                  "name":"David Kensche"
               },
               {  
                  "id":"60036ada-bb2e-43e3-946e-84069e104634",
                  "name":"Christoph Quix"
               },
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               }
            ],
            "keyword":"Generic Model,Model Management,New Technology,Polymorphism",
            "date":"2007-01-01",
            "type":"JOURNAL",
            "event":{  
               "id":"2933f0d2-fea9-4710-91ba-96abe4213399",
               "name":"J. Data Semantics",
               "isAdded":false
            },
            "publisher":"Springer Berlin Heidelberg",
            "pages":"82 - 117"
         },
         {  
            "id":"ed0453c7-3305-4729-b892-312d076c5a6e",
            "title":"A reference model for learning analytics",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"4b59e671-40ad-481a-94e6-3a690dc4f0ad",
                  "name":"Anna Lea Dyckhoff"
               },
               {  
                  "id":"f98844af-1d20-4edf-8caa-7c0017314611",
                  "name":"Ulrik Schroeder",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=8EYyC1MAAAAJ&citpid=1"
               },
               {  
                  "id":"31339434-e6db-43fd-883e-43e4fb2a03f2",
                  "name":"Hendrik Thus"
               }
            ],
            "date":"2012-01-01",
            "type":"JOURNAL",
            "publisher":"Inderscience Publishers",
            "volume":"4",
            "issue":"5-6",
            "venue":"International Journal of Technology Enhanced Learning",
            "pages":"318 - 331"
         },
         {  
            "id":"7cc9ad2d-83d0-497d-908b-6da53884a61d",
            "title":"Towards Web 2.0 Driven Learning Environments.",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"c7add305-625e-4ae8-a64e-b303f2da1914",
                  "name":"Daniel Dahl"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               },
               {  
                  "id":"d41f4b5e-ddfe-4594-b738-cfdc17c2f558",
                  "name":"Gottfried Vossen"
               }
            ],
            "keyword":"Communities.,E-Learning 2.0,Web 2.0",
            "date":"2008-01-01",
            "type":"JOURNAL",
            "event":{  
               "id":"d33be3be-e61f-468b-8f31-e4bef8039a58",
               "name":"WEBIST",
               "isAdded":false
            },
            "publisher":"INSTICC Press"
         },
         {  
            "id":"7b22ea7d-c01b-4f12-8ce7-a2dd346b0bd6",
            "title":"Model -Driven Mashup Personal Learning Environments",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               },
               {  
                  "id":"0a0f8960-1c08-409a-9eab-74a169b89514",
                  "name":"Marcus Specht"
               },
               {  
                  "id":"f98844af-1d20-4edf-8caa-7c0017314611",
                  "name":"Ulrik Schroeder",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=8EYyC1MAAAAJ&citpid=1"
               },
               {  
                  "id":"c7add305-625e-4ae8-a64e-b303f2da1914",
                  "name":"Daniel Dahl"
               }
            ],
            "date":"2011-01-01",
            "type":"JOURNAL",
            "publisher":"Inderscience Publishers",
            "volume":"3",
            "issue":"1",
            "venue":"International Journal of Technology Enhanced Learning",
            "pages":"21 - 39"
         },
         {  
            "id":"d45c5b29-c1fa-451c-9fef-c0d839cbd63e",
            "title":"Toward a Personal Learning Environment Framework.",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"cf40034b-987f-41bb-b120-72780b0e5b60",
                  "name":"Mohammad Ridwan Agustiawan"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               },
               {  
                  "id":"0a0f8960-1c08-409a-9eab-74a169b89514",
                  "name":"Marcus Specht"
               }
            ],
            "keyword":"Informal Learning,Lifelong Learning,Network Learning,Personal Learning Environment,Personalization,Personalized Learning",
            "date":"2010-01-01",
            "type":"CONFERENCE",
            "event":{  
               "id":"9be0abf0-4116-4a4d-a343-1e627eb0f4df",
               "name":"IJVPLE",
               "isAdded":false
            },
            "publisher":"IGI Global",
            "volume":"1",
            "issue":"4",
            "pages":"71 - 82"
         },
         {  
            "id":"7fd0693e-2810-4107-9f57-2b23f1a7e54f",
            "title":"Knowledge Management: A Personal Knowledge Network Perspective.",
            "coauthor":[  
               {  
                  "id":"820f11ee-f47e-40f1-af06-8540ee13f497",
                  "name":"Amine Chatti Mohamed"
               },
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               }
            ],
            "keyword":"knowledge ecology,knowledge management,mohamed amine chatti is,organizational learning,paper type research paper,personal knowledge management,personal knowledge network,personalization",
            "date":"2012-09-07",
            "type":"JOURNAL",
            "event":{  
               "id":"fea389f2-4e5f-4f9b-833b-915b921fa60b",
               "name":"J. Knowledge Management",
               "isAdded":false
            },
            "publisher":"Emerald Group Publishing Limited",
            "volume":"16",
            "issue":"5",
            "pages":"829 - 844"
         },
         {  
            "id":"0314e474-18cb-4c74-8400-eaf075944ec4",
            "title":"The future of e-learning: a shift to knowledge networking and social software.",
            "coauthor":[  
               {  
                  "id":"36ed3644-de6c-4c53-ad3e-dd9d1e7e9f1d",
                  "name":"Mohamed Amine Chatti",
                  "aff":"Rheinisch Westfalische Technische Hochschule Aachen",
                  "photo":"https://scholar.google.com/citations?view_op=view_photo&user=gyLI8FYAAAAJ&citpid=1"
               },
               {  
                  "id":"3ee0eb2e-3291-43e3-bfb2-97f60fea3bc4",
                  "name":"Matthias Jarke"
               },
               {  
                  "id":"703e45a7-53ed-4809-9fba-274b9ba9e698",
                  "name":"Dirk Froschwilke"
               }
            ],
            "keyword":"0,2007,a,a shift to knowledge,and,chatti,communities,d,e-learning,follows,frosch-wilke,jarke,km,knowledge management,learning management,lm,m,reference to this paper,should be made as,social software,the future of e-learning,web 2",
            "date":"2007-01-01",
            "type":"JOURNAL",
            "event":{  
               "id":"ca9e30f6-8c74-4673-8046-6da396c71753",
               "name":"IJKL",
               "isAdded":false
            },
            "publisher":"Inderscience Publishers",
            "volume":"3",
            "issue":"4-5",
            "pages":"404 - 420"
         }
      ],
      "isLock":true,
      "isValid":true
   }
}
<#--
	<div id="tab_publication_detail" class="nav-tabs-custom" style="display:none">
        <ul class="nav nav-tabs">
			<li id="header_publicationresult" class="active">
				<a href="#tab_publicationresult" data-toggle="tab" aria-expanded="true">Detail</a>
			</li>
			<li id="header_sources">
				<a href="#tab_publicationsources" data-toggle="tab" aria-expanded="true">Sources</a>
			</li>
			<li id="header_htmlpdf">
				<a href="#tab_publicationhtmlpdf" data-toggle="tab" aria-expanded="true">Html&Pdf</a>
			</li>
			<li id="header_revision">
				<a href="#tab_publicationrevision" data-toggle="tab" aria-expanded="true">Revision</a>
			</li>
        </ul>
        <div class="tab-content">
			<div id="tab_publicationresult" class="tab-pane active">
			</div>
			<div id="tab_publicationsources" class="tab-pane">
			</div>
			<div id="tab_publicationhtmlpdf" class="tab-pane">
			</div>
			<div id="tab_publicationrevision" class="tab-pane">
			</div>
        </div>
	</div>
	-->
</div>

<div class="box-footer">
</div>

<script>
	$( function(){
		<#-- add slimscroll to widget body -->
		$("#boxbody${wUniqueName} #tab_publication_detail").slimscroll({
			height: "550px",
	        size: "3px",
			allowPageScroll: true,
   			touchScrollStep: 50
	    });

		<#-- set widget unique options -->
		var options ={
			source : "<@spring.url '/publication/detail' />",
			queryString : "",
			id: "",
			onRefreshStart: function( widgetElem ){
						},
			onRefreshDone: function(  widgetElem , data ){
				<#-- show tab -->
				var tabPublicationDetail = $( widgetElem ).find( "#tab_publication_detail" ).first();
				tabPublicationDetail.show();

				<#-- publication tab -->
				var tabHeaderPublicationResult = $( widgetElem ).find( "#header_publicationresult" ).first();
				var tabContentPublicationResult = $( widgetElem ).find( "#tab_publicationresult" ).first();

				<#-- sources tab -->
				var tabHeaderPublicationSources = $( widgetElem ).find( "#header_publicationsources" ).first();
				var tabContentPublicationSources = $( widgetElem ).find( "#tab_publicationsources" ).first();

				<#-- htmlpdf tab -->
				var tabHeaderPublicationHtmlPdfs = $( widgetElem ).find( "#header_publicationhtmlpdf" ).first();
				var tabContentPublicationHtmlPdfs = $( widgetElem ).find( "#tab_publicationhtmlpdf" ).first();


				<#--remove previous content -->
				tabContentPublicationResult.html( "" );
				tabContentPublicationSources.html( "" );

				<#-- title -->
				var pubTitle = 
					$('<div/>')
					.addClass( "palm_section" )
					.append(
						$('<div/>')
						.addClass( "palm_label" )
						.html( "Title :" )
					).append(
						$('<div/>')
						.addClass( "palm_content" )
						.html( data.publication.title )
					);

				<#-- authors -->
				var pubCoauthor = 
					$('<div/>')
					.addClass( "palm_pub_coauthor_blck" );

				var pubCoauthorHeader =
					$('<div/>')
					.addClass( "palm_label" )
					.html( "Coauthor :" );

				var pubCoauthorContainer = $( '<div/>' )
											.addClass( "author-list" );

				$.each( data.publication.coauthor, function( index, authorItem ){
					var eachAuthor = $( '<span/>' );
					
					<#-- photo -->
					var eachAuthorImage = null;
					if( typeof authorItem.photo !== 'undefined' ){
						eachAuthorImage = $( '<img/>' )
							.addClass( "timeline-author-img" )
							.attr({ "width":"40px" , "src" : authorItem.photo , "alt" : authorItem.name });
					} else {
						eachAuthorImage = $( '<i/>' )
							.addClass( "fa fa-user bg-aqua" )
							.attr({ "title" : authorItem.name });
					}
					eachAuthor.append( eachAuthorImage );

					<#-- name -->
					var eachAuthorName = $( '<a/>' )
										.attr({ "href" : "<@spring.url '/researcher' />?id=" + authorItem.id + "&name=" + authorItem.name})
										.css({"padding" : "0 15px 0 5px"})
										.html( authorItem.name );
					eachAuthor.append( eachAuthorName );
					
					pubCoauthorContainer.append( eachAuthor );
				});

				pubCoauthor
					.append( pubCoauthorHeader )
					.append( pubCoauthorContainer );

				tabContentPublicationResult
					.append( pubTitle )
					.append( pubCoauthor );

				<#-- keywords -->
				if( typeof data.publication.keyword != 'undefined'){
					var pubKeyword = 
						$('<div/>')
						.addClass( "palm_section" )
						.append(
							$('<div/>')
							.addClass( "palm_label" )
							.html( "Keywords :" )
						).append(
							$('<div/>')
							.addClass( "palm_content" )
							.html( data.publication.keyword )
						);
							
				tabContentPublicationResult
					.append( pubKeyword );
				}	

				<#-- abstract -->
				if( typeof data.publication.abstract != 'undefined'){
					var pubAbstract = 
						$('<div/>')
						.addClass( "palm_section" )
						.append(
							$('<div/>')
							.addClass( "palm_label" )
							.html( "Abstract :" )
						).append(
							$('<div/>')
							.addClass( "palm_content" )
							.html( data.publication.abstract )
						);
							
				tabContentPublicationResult
					.append( pubAbstract );
				}	

				<#-- content -->
				if( typeof data.publication.content != 'undefined'){
					var pubContent = 
						$('<div/>')
						.addClass( "palm_section" )
						.append(
							$('<div/>')
							.addClass( "palm_label" )
							.html( "Content :" )
						).append(
							$('<div/>')
							.addClass( "palm_content" )
							.html( data.publication.content.replace(/(\t\n)+/g, '<br /><strong>').replace(/(\n\t)+/g, '</strong><br />').replace(/(\n)/g, '<br />') )
						);
							
				tabContentPublicationResult
					.append( pubContent );
				}

				<#-- references -->
				if( typeof data.publication.reference != 'undefined'){
					var pubReference = 
						$('<div/>')
						.addClass( "palm_section" )
						.append(
							$('<div/>')
							.addClass( "palm_label" )
							.html( "Reference :" )
						).append(
							$('<div/>')
							.addClass( "palm_content" )
							.html( data.publication.reference )
						);
							
				tabContentPublicationResult
					.append( pubReference );
				}

				<#-- publication sources -->
				var publicationSourceInnerTabs = $( '<div/>' )
													.attr({"id":"tab_inner_publication_sources"})
													.addClass( "nav-tabs-custom" );
				var publicationSourceInnerTabsHeaders = $( '<ul/>' )
													.addClass( "nav nav-tabs" );
				var publicationSourceInnerTabsContents = $( '<div/>' )
													.addClass( "tab-content" );

				<#-- append tab header and content -->
				publicationSourceInnerTabs.append( publicationSourceInnerTabsHeaders ).append( publicationSourceInnerTabsContents );

				<#-- set inner tab into main tab -->
				tabContentPublicationSources.html( publicationSourceInnerTabs );

				<#-- fill with sources -->
				$.each( data.publication.sources , function( index, source_item ){
					<#-- tab header -->
					var tabHeaderText = capitalizeFirstLetter( source_item.source );
					var tabHeaderTextShort = tabHeaderText;
					if( tabHeaderText.length > 6 )
						tabHeaderTextShort = tabHeaderText.substring(0,6);

					var tabHeader = $( '<li/>' )
						.append(
							$( '<a/>' )
							.attr({ "href": "#tab_" + tabHeaderText, "data-toggle":"tab" , "aria-expanded" : "true", "title" : tabHeaderText})
							.html( tabHeaderTextShort )
						);
		
					<#-- tab content -->
					var tabContent = $( '<div/>' )
						.attr({ "id" : "tab_" + tabHeaderText })
						.addClass( "tab-pane" )
						.html( printKeyValue( source_item ));

					if( index == 0 ){
						tabHeader.addClass( "active" );
						tabContent.addClass( "active" );
					}

					<#-- append tab header and content -->
					publicationSourceInnerTabsHeaders.append( tabHeader );
					publicationSourceInnerTabsContents.append( tabContent );

				});

				<#-- publication htmlpdfs -->
				var publicationHtmlPdfInnerTabs = $( '<div/>' )
													.attr({"id":"tab_inner_publication_htmlpdfs"})
													.addClass( "nav-tabs-custom" );
				var publicationHtmlPdfInnerTabsHeaders = $( '<ul/>' )
													.addClass( "nav nav-tabs" );
				var publicationHtmlPdfInnerTabsContents = $( '<div/>' )
													.addClass( "tab-content" );

				<#-- append tab header and content -->
				publicationHtmlPdfInnerTabs.append( publicationHtmlPdfInnerTabsHeaders ).append( publicationHtmlPdfInnerTabsContents );

				<#-- set inner tab into main tab -->
				tabContentPublicationHtmlPdfs.html( publicationHtmlPdfInnerTabs );

				<#-- fill with htmlpdfs -->
				$.each( data.publication.files , function( index, htmlpdf_item ){
					<#-- tab header -->
					var tabHeaderText = htmlpdf_item.type + " from " + htmlpdf_item.label;
					var tabHeaderTextShort = ( index + 1 ) + "-" + htmlpdf_item.type;

					var tabHeader = $( '<li/>' )
						.append(
							$( '<a/>' )
							.attr({ "href": "#tab_" + tabHeaderTextShort, "data-toggle":"tab" , "aria-expanded" : "true", "title" : tabHeaderText})
							.html( tabHeaderTextShort )
						);

					<#-- content detail -->
					var contentDetail = $( '<dl/>' )
										.addClass( "dl-horizontal" )
										.append(
											$( '<dt/>' ).html( "Obtained from : " )
										)
										.append(
											$( '<dd/>' ).html( htmlpdf_item.source )
										)
										.append(
											$( '<dt/>' ).html( "Source name:" )
										)
										.append(
											$( '<dd/>' ).html( htmlpdf_item.label )
										)
										.append(
											$( '<dt/>' ).html( "Source url:" )
										)
										.append(
											$( '<dd/>' ).html( htmlpdf_item.url )
										)

					<#-- content extractedContent -->
					var contentExtractedResult = $( '<div/>' )
													.attr({ "id" : "result" + tabHeaderTextShort })
													.css({ "width" : "100%" })
													.html( 'Please press "Extract ' + htmlpdf_item.type + '" button to see the extracted result here'  );

					<#-- content navigation -->
					var contentNavigation = 
					$('<div/>')
					.addClass( "palm_option" )
					.append(
						$('<button/>')
						.addClass( "btn btn-block btn-default palm_option_btn" )
						.attr({ "title":  "open " + tabHeaderText} )
						.html( "Open " + htmlpdf_item.type + " in new small window" )
						.click( function( event ){ event.preventDefault();window.open( htmlpdf_item.url , tabHeaderText ,'scrollbars=yes,width=650,height=500')})
					).append(
						$('<button/>')
						.addClass( "btn btn-block btn-default palm_option_btn" )
						.html( "Extract " + htmlpdf_item.type )
						.click( function( event ){ event.preventDefault();extractHtmlOrPublication( htmlpdf_item.url , htmlpdf_item.type , contentExtractedResult );})
					);
		
					<#-- tab content -->
					var tabContent = $( '<div/>' )
						.attr({ "id" : "tab_" + tabHeaderTextShort })
						.addClass( "tab-pane" )
						.append( contentNavigation )
						.append( contentDetail )
						.append( contentExtractedResult );

					if( index == 0 ){
						tabHeader.addClass( "active" );
						tabContent.addClass( "active" );
					}

					<#-- append tab header and content -->
					publicationHtmlPdfInnerTabsHeaders.append( tabHeader );
					publicationHtmlPdfInnerTabsContents.append( tabContent );

				});

				function printKeyValue( jsObject ){
					var descriptionList = $( '<dl/>' );
					$.each( jsObject , function( k, v){
						if( k == "source" )
							return;
						descriptionList.append(
											$( '<dt/>' ).html( k )
										)
										.append(
											$( '<dd/>' ).html( v )
										);
					});
					return descriptionList;
				} 

				function capitalizeFirstLetter(string) {
    				return string.charAt(0).toUpperCase() + string.toLowerCase().slice(1);
				}

				function extractHtmlOrPublication( sourceUrl , targetType, contentExtractedResult ){
					contentExtractedResult.html( "Extracting " + targetType + " from " + sourceUrl + " ..."  );
					if( targetType == "PDF" ){
						$.getJSON( "<@spring.url '/publication/pdfExtractTest' />" + "?url=" + encodeURIComponent(sourceUrl) , function( data ) {
  							contentExtractedResult.html( printKeyValue( data ));
  						});
					} else if( targetType == "HTML" ){
						$.getJSON( "<@spring.url '/publication/htmlExtractTest' />" + "?url=" + encodeURIComponent(sourceUrl) , function( data ) {
  							contentExtractedResult.html( printKeyValue( data ));
  						});
					}
				}

			}
		};


		var publicationDetailObject = {
			"type":"${wType}",
			"group": "${wGroup}",
			"source": "${wSource}",
			"selector": "#widget-${wUniqueName}",
			"element": $( "#widget-${wUniqueName}" ),
			"options": options
		}
		
		<#-- register the widget -->
		$.PALM.options.registeredWidget.push( publicationDetailObject );
	    
	    function extractPdf( publicationId ){
			<#-- add overlay  -->
			publicationDetailObject.element.find( ".box" ).append( '<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>' );
			$.getJSON( "<@spring.url '/publication/pdfExtract' />?id=" + publicationId, function( data ){
				if( data.status == "Ok" ){
					publicationDetailObject.options.queryString = "?id=" + publicationId;
					$.PALM.boxWidget.refresh( publicationDetailObject.element , publicationDetailObject.options );
				} else {
					alert( data.status );
    				// remove overlay and loading 
    				publicationDetailObject.element.find( ".overlay" ).remove();
				}
    		});
		}

		function openPfdOnDialog( pdfUrl ){
			var pdfDialog = $( '<div/>' )
								.addClass( "palm_pdf_dialog" )
								.append(
									$( '<iframe/>' )
									.addClass( "externalContent" )
									.attr({ "scrolling":"yes" , "frameborder":"no" , "marginheight":"0" , "marginwidth":"0", "border":"0" , "src": pdfUrl })
								);
			$( 'body' ).append( pdfDialog );
			pdfDialog.dialog( 
    		{ 
        		title: 'Pdf View',
				height: 460,
				width: 600,
        		close: function(event, ui) 
       			{ 
            		pdfDialog.dialog( "destroy" ).remove();
        		} 
    		});
			pdfDialog.dialog( "open" );
		}


<#-- IFRAME LOAD READY -->
<#-- http://stackoverflow.com/questions/205087/jquery-ready-in-a-dynamically-inserted-iframe -->



	});<#-- end document ready -->
</script>