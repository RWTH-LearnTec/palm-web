<div id="boxbody${wUniqueName}" class="box-body">

	<div class="col-md-12">
		<div class="box box-default box-solid">
			<div class="box-header">
				<h3 class="box-title">Extract publication from Digital Libraries - Morphological Approach</h3>
				<div class="box-tools pull-right">
	            	<button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
	            	<button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
	           </div>
			</div>
			
			<div class="box-body">
				
				<table style="width:100%">
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input2" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">degruyter.com</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input2" name="input2" class="form-control" value="http://www.degruyter.com/view/j/icom.2012.11.issue-1/icom.2012.0007/icom.2012.0007.xml"/>
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input3" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">computer.org</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input3" name="input3" class="form-control" value="http://www.computer.org/csdl/trans/lt/2013/04/tlt2013040337-abs.html"/>
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input4" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">emeraldinsight.com</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input4" name="input4" class="form-control" value="http://www.emeraldinsight.com/doi/abs/10.1108/13673271211262835" />
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input5" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">link.springer.com</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input5" name="input5" class="form-control" value="http://link.springer.com/chapter/10.1007%2F978-3-642-04636-0_30" />
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input6" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">ieeexplore.ieee.org</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input6" name="input6" class="form-control" value="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=1508758" />
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input7" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">igi-global.com</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input7" name="input7" class="form-control" value="http://www.igi-global.com/article/toward-personal-learning-environment-framework/48222" />
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input8" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">dl.acm.org</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input8" name="input8" class="form-control" value="http://dl.acm.org/citation.cfm?id=2337376" />
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" value="input1" />
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">scitepress.org</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="input1" name="input1" class="form-control" value="http://www.scitepress.org/DigitalLibrary/Link.aspx?doi=10.5220/0004791400090020"/>
						</td>
			        </tr>
			        <tr style="background:transparent">
			        	<td style="width:20px;padding:0">
			        		<input type="radio" name="source" id="radiouser" value="inputn" checked/>
			        	<td>
			            <td class="urlstyle" title="Click to open left URL as new small window" style="width:20%;padding:0">
			            	<span style="margin-top:5px;">your URL</span>
						</td>
			            <td style="padding:0">
			            	<input type="text" id="inputn" name="inputn" class="form-control" placeholder="paste URL here" />
						</td>
			        </tr>
			    </table>
	    
			</div>
		</div>
	</div>
	
	 <br/>

	 <form role="form" id="extractPublication" style="clear:both">
		
		<#-- title -->
		<div class="form-group">
	      <label>Title</label>
	      <input type="text" id="title" name="title" class="form-control" placeholder="Currently not supported to extract title" readonly="true"/>
	    </div>
	    
	    <div id="similar-publication-container" class="form-group" style="display:none">
	    	<div class="callout callout-warning">
	            <h4>Similar publication is found on PALM database!</h4>
	            <div class="content-list info-box">
	            </div>
	        </div>
	    </div>

		<#-- author -->
		<div class="form-group">
	      <label>Author</label>
	      <textarea name="author" id="author" class="form-control" rows="3" placeholder="Currently not supported to extract authors" readonly="true"/></textarea>
	    </div>
	    
		<#-- abstract -->
		<div class="form-group">
	      <label>Abstract</label>
	      <textarea name="abstractText" id="abstractText" class="form-control" rows="3" placeholder="Abstract"></textarea>
	    </div>

		<#-- keyword -->
		<div class="form-group">
	      <label>Keywords</label>
	      <textarea name="keywords" id="keywords" class="form-control" rows="3" placeholder="Keywords"></textarea>
	    </div>
	  
	</form>
</div>

<div class="box-footer">
</div>

<script>
	$(function(){
	
		 $(".content-wrapper>.content").slimscroll({
				height: "100%",
		        size: "8px",
	        	allowPageScroll: true,
	   			touchScrollStep: 50,
	   			alwaysVisible: true
		  });
		  
		 $( ".urlstyle" ).click( function( e ){
		 	e.preventDefault();
		 	
		 	var url = $( this ).next().find( "input:first").val();
		 	if( url != "" )
		 		window.open( url , "" ,'scrollbars=yes,width=650,height=500');
		 });

		var tempUrl = "";
	    <#-- extract with given link -->
		$( "input[name='source']" ).on( "change", function(){
			var _this = $( this );
			setTimeout(function(){ 
				var sourceUrl = $( "#" +_this.val()).val();
				
				var $container = $("#extractPublication");
				
				if( typeof sourceUrl !== "undefined" && sourceUrl !== "" && tempUrl == sourceUrl )
					return false;
				tempUrl = sourceUrl;
				
				doExtractWebPage( $container, sourceUrl );
			}, 300);
		});
		
	    <#-- extract with given link -->
		$( "#inputn" ).on( "paste blur", function(){
			$( "#radiouser" ).prop( "checked", true);
			var _this = $( this );
			setTimeout(function(){ 
				var sourceUrl = _this.val();
				var $container = $("#extractPublication");
				
				if( tempUrl == sourceUrl )
					return false;
				tempUrl = sourceUrl;
				
				doExtractWebPage( $container, sourceUrl );
			}, 300);
		});
		
		
		function doExtractWebPage( $container, sourceUrl ){
			$( "#widget-${wUniqueName}" ).find( ".box" ).append( '<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>' );
			$.getJSON( "<@spring.url '/publication/htmlExtract' />" + "?url=" + encodeURIComponent( sourceUrl ) , function( data ) {
				$container.find("#title").val(data.title);
				$container.find("#author").val(data.author);
				$container.find("#abstractText").val(data.abstract);
				$container.find("#keywords").val(data.keyword);
				$( "#widget-${wUniqueName}" ).find( ".overlay" ).remove();
			});
		}
		
	});

</script>